<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Visbeer Game</title>
<style>
body { margin:0; overflow:hidden; background:#87ceeb; font-family:Arial,sans-serif; }
canvas { display:block; margin:0 auto; background:#87ceeb; }
#score { position:absolute; top:10px; left:10px; font-size:24px; color:#fff; text-shadow:1px 1px 2px #000; }
#message { position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); font-size:40px; color:#fff; display:none; }
</style>
</head>
<body>
<div id="score">Score: 0</div>
<div id="message">GAME OVER</div>
<canvas id="gameCanvas"></canvas>
<script>
// Setup
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

// Game variables
let score = 0;
let gameOver = false;
let fishArray = [];
let obstacles = [];
let upgrades = [];

// Load images
const bearImg = new Image();
bearImg.src = 'https://i.ibb.co/7G7Q0tF/bear.png'; // voorbeeld visbeer
const fishImg = new Image();
fishImg.src = 'https://i.ibb.co/0F3G6Z2/fish.png';
const obstacleImg = new Image();
obstacleImg.src = 'https://i.ibb.co/yfG2yYq/rock.png';
const upgradeImg = new Image();
upgradeImg.src = 'https://i.ibb.co/kcM8c9b/upgrade.png';

// Bear object
const bear = { x:canvas.width/2, y:canvas.height-120, width:100, height:100, speed:7 };

// Classes
class Fish { constructor(){ this.width=50; this.height=30; this.x=Math.random()*(canvas.width-50); this.y=-30; this.speed=2+Math.random()*2; } draw(){ ctx.drawImage(fishImg,this.x,this.y,this.width,this.height); } update(){ this.y+=this.speed; } }
class Obstacle { constructor(){ this.width=60; this.height=60; this.x=Math.random()*(canvas.width-60); this.y=-60; this.speed=3; } draw(){ ctx.drawImage(obstacleImg,this.x,this.y,this.width,this.height); } update(){ this.y+=this.speed; } }
class Upgrade { constructor(){ this.width=50; this.height=50; this.x=Math.random()*(canvas.width-50); this.y=-50; this.speed=2; } draw(){ ctx.drawImage(upgradeImg,this.x,this.y,this.width,this.height); } update(){ this.y+=this.speed; } }

// Controls
let keys = {};
window.addEventListener('keydown', e=>keys[e.key]=true);
window.addEventListener('keyup', e=>keys[e.key]=false);

// Touch
let touchX = null;
window.addEventListener('touchstart', e=>touchX=e.touches[0].clientX);
window.addEventListener('touchmove', e=>{
  if(touchX!==null){ let delta=e.touches[0].clientX-touchX; bear.x+=delta; touchX=e.touches[0].clientX; }
});
window.addEventListener('touchend', e=>touchX=null);

// Collision
function collision(a,b){ return a.x<a.x+b.width && a.x+a.width>b.x && a.y<a.y+b.height && a.y+a.height>b.y; }

// Spawners
function spawnFish(){ if(Math.random()<0.02) fishArray.push(new Fish()); }
function spawnObstacle(){ if(Math.random()<0.01) obstacles.push(new Obstacle()); }
function spawnUpgrade(){ if(Math.random()<0.005) upgrades.push(new Upgrade()); }

// Game loop
function gameLoop(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // Bear move
  if(keys['ArrowLeft'] && bear.x>0) bear.x-=bear.speed;
  if(keys['ArrowRight'] && bear.x+bear.width<canvas.width) bear.x+=bear.speed;

  // Draw bear
  ctx.drawImage(bearImg,bear.x,bear.y,bear.width,bear.height);

  // Fish
  spawnFish();
  fishArray.forEach((f,i)=>{ f.update(); f.draw(); if(collision(bear,f)){ score++; fishArray.splice(i,1); } if(f.y>canvas.height) fishArray.splice(i,1); });

  // Obstacles
  spawnObstacle();
  obstacles.forEach((o,i)=>{ o.update(); o.draw(); if(collision(bear,o)) gameOver=true; if(o.y>canvas.height) obstacles.splice(i,1); });

  // Upgrades
  spawnUpgrade();
  upgrades.forEach((u,i)=>{ u.update(); u.draw(); if(collision(bear,u)){ bear.speed+=2; upgrades.splice(i,1); } if(u.y>canvas.height) upgrades.splice(i,1); });

  // Update score
  document.getElementById('score').innerText = `Score: ${score}`;

  if(!gameOver) requestAnimationFrame(gameLoop);
  else document.getElementById('message').style.display='block';
}

gameLoop();
</script>
</body>
</html>
